language: ruby
rvm:
- 2.2.0
script:
- bundle exec rake db:migrate --trace
- RAILS_ENV=test bundle exec rake db:migrate --trace
- bundle exec rake db:test:prepare
- bundle exec rspec -fd spec/
before_install:
- export DISPLAY=:99.0
- sh -e /etc/init.d/xvfb start
deploy:
  provider: heroku
  api_key:
    secure: CmeUfuGAFeJL9TndQggRcG+crRNhPrOrU/xS9Y1TJ0cfjiHKGPqmW9QdqES9C7JmnS3zclpg2snukRnPsC9j0KaYrGiIduoziK9Vp7GaNFhBbSDi4CA9fPh4EP0QdMDrSB9OAEiteFE2XIs0Qn3LwVMMCiaqhPSzmNnmLTNjr62HCbLuWc8nWaQcP7Gc1tzpggJIz1e0OKp72kn/ki5rfe8YpF6zBDqRxvP55uOITKhgkSmMN0Y7rVNrmx9T81sqCCGClPeeTru+KKcmB3hCJVXoQxX+eFsy3eA4wrgeCf6bn7PiNb7tb8gXNgSDTc9I2IeRjNBnLPTTchZV9VF2OtA2zOnCunOow6+IUYgJRRCK9uH4NfrpqaNEOavQ0XDyemDdoMj99maW8vRub/QGSmBsrMbCcpXnJajRCVGP7lEwjkoRrpfnlO7ZFncYqRhq3F2USGFoo36xzY3b6zFEX7a388VG7r6Y8Xv6PkMOxXNwhpsH14Tm55ojQz4sDBiZRq823SNazQp6slKFotR6SaNldCQ/f9sTlAqn24k0Z/+m9Cn2VUQJZeRbzVkqhpS7Nj5YAknHtk/Ttv9Pza79mgqn+eAfLwIjoFZXwIDYln7YBG+PZcGvTyPfqLBfoc7kpQO1i7nufwyFI4siW/CNZ1Mp7RNWQe224XgTesnFFz4=
  app: kalia-app
  on:
    repo: jeto/wadror2017
  run: rake db:migrate
env:
  global:
  - secure: NB3/9omB3s8RCPV6oVtM+3zXJ7tIrb003ca1gKj/+TTdxED6X1yJNTodWxxxY8f0ZlLU1zc3xbHdEUead/RYldv5qDpZBOZ9nKf6HILrSJdOe3eh+A6WWCHL4ammlPx+0QLcjqdIi9g3CfMx5Bz5fTAtC3gzfrNUdubj4qWxbSO5pab8IIu8N9XqU68LG007G/5ObgP3dm24TDskgLSRfLPnQuF1GTYOW9soUBgs84Q/i8ZcfAJBOatTHeFt8ODjJilM5DCCo3qIcy/vYgWIfbOgpSkUZmjZJrZ6vvw2gvRUjsNnKMJ7J20QE3dCcRrE4lTHKxbOwvZdHeyWbKuuclmWp53ZOnZdavifzotEwGTiLvmqzYPV3JlN+1r6JqTeFlLaDMBIYfE67TgRFwJntQN7/vXStYxu+CmyAGZcXYyrE2XRIu5BHhlzHUH6v0CRfmgqFRUv/BYFTsN7hVDxAwcWwwD5fuk86QpcW1K9ee5xV//TxbMegoQTgWiAM7g1gQABGFbXqmEQqHhq2Fk7Bbi7ilHEAniHFA8FNi6XIMizYtjitFArQYTwAD0JTz8Op1OBCoRSUF1c8wiWLgAlA8GjMnTupusmNMrAHly41Jis3JVX5dnGxVwm+/wfiQCZdWYfrREKgxmK9EEhSgO7dHzR5R5sXD42bpGN9xM2dZc=
  - secure: aCBPQD78WQEjg+/tRh9x4Ay/zICtbw74vDSMQjUYllXjcc8b3fml9An2r9p9rzcPUK1Gk9dkpwP8fyJ6Rw4Sel66FppnT3m85BN7XDUurRJbPeAKgNkRFI+jajvt4tAlg/oB4RFFLlEUz4tCd4wY2Pw7s8oQeu2FUB4BMQrsPbGBjRRqxPGMRjaYkO4iOqCpIRg9YI17qH2VAKfVHJ3c/8EP+EIImw1rlFtOza3B8FcwrjlCleKOS863YiITobTg2E7jb3uGtA298HrCXUUHaJ8C5GBDiF2k+Fr4GvfKfaTFgS27SHjKL+gO2M6ccWRcd1JUktZ1gLUzUjzZznolsbXhsF0/6xRYbhrScyd+gFJrtrnXfZZMkMudd6Tom6TXV5BOigdxhWsdN+UfjyWCtlKuz5N+SXYdlcsa6+rUWJ8XJwQKYrdGvbcuKK4qbcIAF59V13/6IVvDo6hj84wmCUbC4WQsXwswLl5qWPaJhWDcmHILwKcSx1tmfvtqW+IFSSw2R9zcsQnOFH8b/k+3YVqhODI1+stlIrRnl0Ktf95mk0Ke6a3XVU043oAmJSbDhjYEikkHxIj5qilM+5aLPV9YllmOQaSWx8s9P405zqYlC5ZnX3HmdoyGGoKPoKIRsbV+P9VWxoQQhJflQsaefkRPXrz+GCqkukJ2e/SbJKo=
  - secure: aA7HgmG6PuSy1zA/jHwXnfs0JtMXhtAOwvucb7OAXRGo3l896QwFOOdcNMfB2Jn37L52k/6xmvgWjbwcGToiSFytE00SvqCuvQSaTOSEtUaLz0y6J99Z2SQGQeDBxXG58OJTrb5OunR6Wgh9/eOtOmGiXZnChOFZXb5jzuaPx+m17gnEw4RlDE5pOyH0EjEWiPQOgTIOm5tql1PUhNklxnJB/ThVUPtBV4Qiiu++T9tFKuDtDTikUiStvDRnkGMJkEeqQhBjnv0EDJUx0YOZlPt5T+WATsVSgqDuqUNw+1nrZ/+OpHU0d8w7B+oF54na4tmTxC2AZrhhIVfd/iV7PrcHo8ThjImlqxa3GblqQUQI9X/i5yChPAgH5VJ0NW9uAGEP/cV0QVNk0oSEmlslmjUPkumOMPejZFqREQpevsY4aOVyXmgbBUEyeTNpWAQYkJlXpgIfGXjzvB43TEhMobIdM5Ta73iKmOCpEB3e/V/UKbjw2KnLuuXOhkjmZKgmZDd5+ZSnV7cN1+FJu5riFbSopt6hStYCRrYNLYtoWHUmACa3jx4L0H4Y5+DM6VEe5pGojzr3c3i5F7KE8hK5G0YoChgQ62k8QwsP4f1fIz6XUpVBXhA4KADCxY8e2r/V/Kuhh1E+XDcbGKcurCmnFTjzNmDFH4WGKD5sAkyyPow=
  - secure: MMHSwXdOB/Krw35ZXmKoWxR0V9KmTsxTpilxkmq1hvG0t4lwIxBbCpgAehebpAzan7HO+RbmQFGeDPdXTcIxLvaG/ChCnY8Df3Lczc+35M+FzUBaboz5qnWHr6OoqsELv4ZSpO2hm4OJ2XrVGrUm0wIwxn3yz92Rm4PjEN62nC+bPGq3JQezJD+jqhq+OuuvbfzxWO5P7ALBQ8O/dohFF77mXtv2sfdvFLKOWINyu5fDV47Cjvb7UBWb7OKd+vmCniI8WPmfXTCMsm0/7kjT1oFcyue0K/zs2hX9gkvmzERUW4IhSyuQVqRxd5Owct6RznGZFhVquRbC7bAyHeanE5ekJs5MHuU2atMZb5qlJet+xJowwrTMeW1B5l9KNJKBrmYGNcmMw5Fgt9ZuBlwqXp28sf8q/mPDouPgZakLDLgrRx3Mev1rDBsCwIF3pyhq07nqSUKgiYxkKnE3SH5//mcp020IJCgJpMQYgihE8yENuTHMSAEvlQa1i+dzjSOJwt9/RF4xVZooh+Wcot83jRAtfcuOBMLyJK0NWzGeqS34fgWQQTFD+kwtS7eP8WMnGFW33sZsaE3yfY6JqP9RWqh4ANgLJLq+y343VbClSZckjGOPmUJ09ftU1LXmvpggDHkpvyAS7aq+JxzPYJVZhwOZpMqLDQVTgvnaOzPxjQk=
  - secure: AmxUQPf/Oa03J5n5kBoV23ecfr/lToGuaFkcL2SGOlzGhhj8VrE+QXbgmjvrsOMK35L23Uw4tjcQdJNx8wgXVQ9qeE7TbUCEY5hJ6/jm4ia26D7VRKpA2wYRWs5FT/Hmusv+GduimxKAGlzsqWAhzG2e5+x+RM7U/DO/pABb0JYna7NCVAyeWuww872H0PsLsKCRUHwfBIrHCRCmHKqOIHQN4cuQDlfYCnxK54ywZ2FGJ1DVPXhe4iKcbSMD/uKzDwoge4ptRd+SQNyY9hrsF/IS0J8HNVko6lmnwBuUtIO0V/zkycuHKyvB/cbPsOBztnGfIs78RGCYl5izETA5vpCAORF8fPS57qpkBe3ao03NPPWu1S6trLkLz/AIOQ4Wjnq5hw6fBPkHceQpUmJoKcnReUC2eCW5l2ff8MR1KhLMMp21L1VnfP2sYLVzbx7euizASsz+SGWk8eT3pz34alLLxxJPw4L3o+mGar/PooTnTMwS1GATqTw5WI2R7uCuV/Bipb0fo9krUaLKfsAXwKWCM+jMzrm4N0bBJPaFRIlQGsz5BK92sBRKOmJHtXwvvPBuYw9O/ugXMiSJxZwwgBbubG28Icyu95O+DUfOzdXHbq358iDP0Kk2epKJ80pFIgAzV/4inEzB9bATn1sS6EAoChGwm5jr3OU3CDH4AMA=
  - secure: cW865R38jIc7oITOM6iMx1lvr0C7fGVx4rJL/SxKvH1h1xjYXqtzGRuamyny9xbDDCzhfx9FStELnOndWruMflUMi/o1TemC6fhu0//yYmAVbEuXlgiGy3C98JgOPmzuT33E/T49DoMt4IaaKArgNrWghxTxjQo78Ttsw5xJ25JSpnHkRPKzPGGWojfob117O249g2wQmLsRPppInrZ2/uDIpIV5Dj5UyR1/Gi74QKkKvdhUhHey+vYVzNCz1HO6dQrrG/gT+Tru/IBaqdoXaCyDNg3MwFepxA3XcVcxIESTUU7Jo1WQ2ziE7YxRVbhYMcLzMt4FRDONCySDSsPb1OH8vLK4eLGYzu5j/2iuJDot2t8/t4JV/Pelu5aeDNSZtvV8TL3P5quDFDPkvvFZYPpZUWKCxXGhMiWkShp9NwMoAdaG3AhuEVwPi1GhBsCcIcZa89uZoBDKDTLl4Rl130bQm13Hb3GD1q0ETebfP62HCIM97Pp5DE+wIX+YJozXgpba9TZr3hrSTYr9s2t91wHks7cTMWz+paNGy8a203lcTd1L4SJE5IGKBA6CWo5QI5RH8fCh+QAFK5iA7gDUU9gjbiRIa1oUNtWVPqr0Y+Kb2csfRP9pYg+YJ15fcqM6QY5aoyntZ8n2oadeoCwOiyFV/rD/7k4GraZT9u/1BOo=
